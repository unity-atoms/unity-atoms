"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[583],{736:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"tutorials/unirx","title":"Usage with UniRX","description":"Variables and Events exposes methods that returns IObservables. Atom Variables exposes ObserveChange and ObserveChangeWithHistory, while Atom Events exposes Observe. This makes it possible to use Unity Atoms seamlessly together with UniRx.","source":"@site/../docs/tutorials/unirx.md","sourceDirName":"tutorials","slug":"/tutorials/unirx","permalink":"/unity-atoms/docs/tutorials/unirx","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Miika L\xf6nnqvist","lastUpdatedAt":1623695595000,"frontMatter":{"id":"unirx","title":"Usage with UniRX","hide_title":true,"sidebar_label":"Usage with UniRX"},"sidebar":"docs","previous":{"title":"Advanced example","permalink":"/unity-atoms/docs/tutorials/advanced-example"},"next":{"title":"Base Atoms","permalink":"/unity-atoms/docs/subpackages/base-atoms"}}');var s=t(4848),a=t(8453);const r={id:"unirx",title:"Usage with UniRX",hide_title:!0,sidebar_label:"Usage with UniRX"},l="Usage with UniRX",o={},c=[{value:"Simple example",id:"simple-example",level:2},{value:"Advanced example",id:"advanced-example",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"usage-with-unirx",children:"Usage with UniRX"})}),"\n",(0,s.jsxs)(n.p,{children:["Variables and Events exposes methods that returns ",(0,s.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/api/system.iobservable-1?view=netframework-4.8",children:(0,s.jsx)(n.code,{children:"IObservables"})}),". Atom Variables exposes ",(0,s.jsx)(n.code,{children:"ObserveChange"})," and ",(0,s.jsx)(n.code,{children:"ObserveChangeWithHistory"}),", while Atom Events exposes ",(0,s.jsx)(n.code,{children:"Observe"}),". This makes it possible to use Unity Atoms seamlessly together with ",(0,s.jsx)(n.a,{href:"https://github.com/neuecc/UniRx",children:"UniRx"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"simple-example",children:"Simple example"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"HealthBar.cs"})," script from the ",(0,s.jsx)(n.a,{href:"/unity-atoms/docs/tutorials/variables",children:"Variables"})," tutorial could be rewritten like this using UniRx:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cs",children:"using UnityEngine;\nusing UnityEngine.UI;\nusing UniRx;\n\npublic class HealthBarUniRx : MonoBehaviour\n{\n    [SerializeField]\n    private IntVariable _health = null;\n\n    void Awake()\n    {\n        _health.ObserveChange().Subscribe(health =>\n        {\n            GetComponent<Image>().fillAmount = 1.0f * health / _health.InitialValue;\n        });\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"advanced-example",children:"Advanced example"}),"\n",(0,s.jsxs)(n.p,{children:["Here is another example of a ",(0,s.jsx)(n.code,{children:"PlayerMove.cs"})," script that is a little bit more advanced. Horizontal and vertical input is only getting a value from the ",(0,s.jsx)(n.code,{children:"Input"})," class as long as the UI state is in the state of ",(0,s.jsx)(n.code,{children:"_uiStatePlaying"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["NOTE: This example is also using ",(0,s.jsx)(n.a,{href:"https://github.com/AdamRamberg/marvelous",children:"Marvelous"})," for its ",(0,s.jsx)(n.code,{children:"Fuse"})," method."]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cs",children:'using System;\nusing UnityEngine;\nusing Marvelous;\nusing UniRx;\nusing UnityAtoms.BaseAtoms;\n\npublic class PlayerMoveUniRx : MonoBehaviour\n{\n    [SerializeField]\n    private StringVariable _uiState;\n    [SerializeField]\n    private StringConstant _uiStatePlaying;\n\n    private void Awake()\n    {\n        float _horizontal = 0f, _vertical = 0f;\n        string HORIZONTAL = "Horizontal", VERTICAL = "Vertical";\n\n        Observable.EveryUpdate().Fuse<long, string>(\n            _uiState.ObserveChange(),\n            initialValue2: _uiState.Value\n        ).Subscribe(t =>\n        {\n            var (_, state) = t;\n            _horizontal = state == _uiStatePlaying.Value ? Input.GetAxis(HORIZONTAL) : 0f;\n            _vertical = state == _uiStatePlaying.Value ? Input.GetAxis(VERTICAL) : 0f;\n        });\n\n        Observable.EveryFixedUpdate().Subscribe(t =>\n        {\n            GetComponent<Rigidbody2D>().velocity = new Vector2(_horizontal, _vertical) * 5f;\n        });\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Using Unity Atoms together with UniRx and Marvelous (for its ",(0,s.jsx)(n.code,{children:"Fuse"}),") makes your scripts really data driven."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var i=t(6540);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);